<Window x:Class="ClientLedger.CustomerDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Customer" Height="500" Width="450" WindowStartupLocation="CenterScreen" ResizeMode="NoResize"
        Background="#F4F6F8">
    <Border Background="White" Padding="10" CornerRadius="12" Margin="10">
        <Grid Margin="5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- Business Name Label -->
                <RowDefinition Height="Auto"/>
                <!-- Business Name TextBox -->
                <RowDefinition Height="Auto"/>
                <!-- Contact Name Label -->
                <RowDefinition Height="Auto"/>
                <!-- Contact Name TextBox -->
                <RowDefinition Height="Auto"/>
                <!-- Agreement Type Label -->
                <RowDefinition Height="Auto"/>
                <!-- Agreement Type ComboBox -->
                <RowDefinition Height="Auto"/>
                <!-- Base Rate Label -->
                <RowDefinition Height="Auto"/>
                <!-- Base Rate TextBox -->
                <RowDefinition Height="*"/>
                <!-- Retainer Categories (List) -->
                <RowDefinition Height="Auto"/>
                <!-- Buttons -->
            </Grid.RowDefinitions>

            <!-- Business Name -->
            <TextBlock Text="Business Name" Margin="0,0,0,5" Foreground="#666" FontWeight="SemiBold" Grid.Row="0"/>
            <TextBox x:Name="BusinessNameBox" Grid.Row="1" Height="30" BorderBrush="#ccc" BorderThickness="1" Padding="5" />

            <!-- Contact Name -->
            <TextBlock Text="Contact Name" Margin="0,15,0,5" Foreground="#666" FontWeight="SemiBold" Grid.Row="2"/>
            <TextBox x:Name="ContactNameBox" Grid.Row="3" Height="30" BorderBrush="#ccc" BorderThickness="1" Padding="5" />

            <!-- Agreement Type -->
            <TextBlock Text="Agreement Type" Margin="0,15,0,5" Foreground="#666" FontWeight="SemiBold" Grid.Row="4"/>
            <ComboBox x:Name="AgreementTypeComboBox" Grid.Row="5" Height="30" BorderBrush="#ccc" BorderThickness="1" Padding="5" SelectionChanged="AgreementTypeComboBox_SelectionChanged">
                <ComboBoxItem Content="Service Agreement" Tag="ServiceAgreement" />
                <ComboBoxItem Content="Retainer" Tag="Retainer" />
            </ComboBox>

            <!-- Base Rate (only visible if Service Agreement) -->
            <StackPanel Grid.Row="6" Margin="0,15,0,0" x:Name="BaseRatePanel" Visibility="Collapsed">
                <TextBlock Text="Monthly Cost" Margin="0,0,0,5" Foreground="#666" FontWeight="SemiBold" />
                <TextBox x:Name="MonthlyCostBox" Height="30" BorderBrush="#ccc" BorderThickness="1" Padding="5" />
                <TextBlock Text="Base Rate" Margin="0,0,0,5" Foreground="#666" FontWeight="SemiBold" />
                <TextBox x:Name="BaseRateBox" Height="30" BorderBrush="#ccc" BorderThickness="1" Padding="5" />
            </StackPanel>

            <!-- Retainer Categories (only visible if Retainer) -->
            <StackPanel Grid.Row="7" Margin="0,15,0,0" x:Name="RetainerCategoriesPanel" Visibility="Collapsed">
                <TextBlock Text="Retainer Categories and Max Hours" Margin="0,0,0,5" Foreground="#666" FontWeight="SemiBold" />

                <!-- List of categories -->
                <ItemsControl x:Name="RetainerCategoriesList">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="0,2">
                                <TextBox Width="180" Text="{Binding CategoryName, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,5,0" />
                                <TextBox Width="80" Text="{Binding MaxHours, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,5,0" />
                                <Button Content="Remove" Click="RemoveCategory_Click" Tag="{Binding}" />
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <Button Content="Add Category" Width="100" Margin="0,10,0,0" Click="AddCategory_Click" />
            </StackPanel>

            <!-- Buttons -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Row="8" Margin="0,20,0,0" >
                <Button Content="Cancel" Width="80" Margin="5" Background="#EF4444" Foreground="White" FontWeight="Bold" 
            Click="Cancel_Click" Cursor="Hand" VerticalAlignment="Center" HorizontalAlignment="Center" />
                <Button Content="Save" Width="80" Margin="5" Background="#00D1B2" Foreground="White" FontWeight="Bold" 
            Click="Save_Click" Cursor="Hand" VerticalAlignment="Center" HorizontalAlignment="Center" />
            </StackPanel>
        </Grid>
    </Border>
</Window>
